#!/usr/bin/env lfe
;; -*- lfe -*-

(include-file "_build/default/lib/clj/include/compose.lfe")

(io:format " ~~~~>    Generating documentation for lodox ...\n")

(->> (lodox-parse:docs #"lodox")
     (list* `#(app-dir    ,(let ((`#(ok ,cwd) (file:get_cwd))) cwd))
            `#(source-uri ,(++ "https://github.com/lfe-rebar3/lodox"
                               "/blob/{version}/{filepath}#L{line}")))
     (lodox-html-writer:write-docs)
     (list)
     (io:format "\nGenerated documentation in ./~s\n"))
